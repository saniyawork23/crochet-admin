<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Crochet Admin â€“ View Orders</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    /* ================= NAVBAR ================= */
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 30px;
      background: #ffffff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      font-family: 'Poppins', sans-serif;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-icon {
      font-size: 22px;
    }

    .brand-name {
      font-size: 18px;
      font-weight: 600;
      color: #4f46e5;
    }

    .nav-links a {
      margin-left: 20px;
      text-decoration: none;
      font-size: 14px;
      color: #444;
      font-weight: 500;
    }

    .nav-links a:hover {
      color: #4f46e5;
    }

    /* ================= VIEW ORDERS PAGE ================= */
    .orders-page {
      font-family: 'Poppins', sans-serif;
      background: #f5f7fb;
      min-height: calc(100vh - 64px);
      padding: 30px;
    }

    .orders-container {
      max-width: 1100px;
      margin: auto;
      background: #ffffff;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
    }

    .orders-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .orders-header h2 {
      color: #333;
      font-weight: 600;
    }

    .search-box input {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 14px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      background: #f0f1ff;
      text-align: left;
      padding: 12px;
      font-size: 13px;
      color: #4f46e5;
    }

    td {
      padding: 12px;
      font-size: 13px;
      border-bottom: 1px solid #eee;
      color: #444;
    }

    tr:hover {
      background: #fafafa;
    }

    .badge {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }

    .offline {
      background: #e0f2fe;
      color: #0369a1;
    }

    .online {
      background: #ede9fe;
      color: #5b21b6;
    }

    .edit-btn {
  background: #4f46e5;
  color: white;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
}

.delete-btn {
  background: #ef4444;
  color: white;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
}

  </style>
</head>

<body>

  <!-- ================= NAVBAR ================= -->
  <div class="navbar">
    <div class="nav-left">
      <div class="brand-icon">ðŸ§¶</div>
      <div class="brand-name">Crochet Admin</div>
    </div>

    <div class="nav-links">
      <a href="index.html">Add Order</a>
      <a href="orders.html">View Orders</a>
      <a href="customers.html">Customers</a>
      <a href="dashboard.html">Dashboard</a>
    </div>
  </div>

  <!-- ================= ORDERS PAGE ================= -->
  <div class="orders-page">
    <div class="orders-container">

      <div class="orders-header">
        <h2>Orders</h2>

        <div class="search-box">
          <input type="text" placeholder="Search customer or item...">
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Customer</th>
            <th>Item</th>
            <th>Qty</th>
            <th>Total (â‚¹)</th>
            <th>Mode</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
  <button onclick="editOrder('ORD001')">Edit</button>
<button onclick="deleteOrder('ORD001')">Delete</button>

</td>

          </tr>
        </tbody>
      </table>

    </div>
  </div>
<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzLws_Xjv-Sc1u-D1gtzYrZfaBEe1H_JVaYcktWP7tyClfORI4HE5SkqyGhNl1IWsRj/exec";

async function fetchOrders() {
  const res = await fetch(`${SCRIPT_URL}?action=getOrders`);
  const orders = await res.json();

  const tbody = document.querySelector("table tbody");
  tbody.innerHTML = "";

  orders.forEach(o => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${o.date}</td>
      <td>${o.customerName}</td>
      <td>View Items</td>
      <td>-</td>
      <td>${o.total}</td>
      <td>${o.mode}</td>
      <td>
        <button class="edit-btn" onclick="editOrder('${o.orderId}')">Edit</button>
        <button class="delete-btn" onclick="deleteOrder('${o.orderId}')">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

function editOrder(orderId) {
  window.location.href = `edit-order.html?orderId=${orderId}`;
}

async function deleteOrder(orderId) {
  if (!confirm("Are you sure you want to delete this order?")) return;
  const res = await fetch(`${SCRIPT_URL}?action=deleteOrder&orderId=${orderId}`);
  const text = await res.text();
  alert(text);
  fetchOrders();
}

window.addEventListener("DOMContentLoaded", fetchOrders);
</script>


</body>
</html>
